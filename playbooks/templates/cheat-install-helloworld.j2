#!/bin/bash

## This script on snipes the pod name and runs oc cp {src} podname:{dst}

for PODNAME in `oc get pods --no-headers | awk '{ print $1 }'` ; do

    if [[ "${PODNAME}" =~ "^.*-(.*)$" ]] && \
        [ "${BASH_REMATCH[1]}" != "deploy" ] && \
        [ "${BASH_REMATCH[1]}" != "build" ] ; then

        echo "DETERMINED POD = ${MYPOD}"
        echo "BASH EXEC: oc cp ${SRC} ${DST}"
        echo ""

        echo "Copying ${SRC} to ${DST}"
 
        exec oc cp ${SRC} ${DST}

    fi
done
